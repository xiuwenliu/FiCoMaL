@{
    ViewBag.Title = "Index";
}

    <script>
        $(document).ready(function () {

            var $win = $(window),
            $ad = $('#coach_list').css('opacity', 0).show(),//讓教練區塊變透明且顯示出來
            _width = $ad.width(),
            _height = $ad.height(),
            _diffY = _height, _diffX = _width / 3,	// 距離右及下方邊距
            _moveSpeed = 400;	// 移動的速度

            // 先把 #abgne_float_ad 移動到定點
            $ad.css({
                top: $(document).height(),
                left: _diffX,
                opacity: 0.8
            });

            // 幫網頁加上 scroll 及 resize 事件
            $win.bind('scroll resize', function () {
                var $this = $(this);

                // 控制 #coach_list 的移動
                $ad.stop().animate({
                    top: $this.scrollTop() + _diffY,
                    left: $this.scrollLeft() + _diffX
                }, _moveSpeed);
            }).scroll();// 觸發一次 scroll()

            // 關閉教練列表
            $('#coach_list .close_coach_list').click(function () {
                $('.coach_list_content').slideToggle();
            });

            $.get(
                    "@Url.Content("~/Home/GetDiaryEvents")",
                '',
                function (res) {
                    alert(JSON.stringify(res));
                },
                "json"
            );

            $('#calendar').fullCalendar({
                theme: true,
                lang: 'zh-tw',
                header: {
                    left: 'prev,next today',
                    center: 'title',
                    right: 'month,agendaWeek,agendaDay'
                },
                defaultView: 'agendaWeek',
                selectable: true,
                selectHelper: true,
                allDaySlot: false,
                editable: true,
                eventLimit: true,//allow "more" link when too many events
                minTime: "08:00:00",
                maxTime: "22:00:00",
                events: "@Url.Content("~/Home/GetDiaryEvents")",//設定來源

                //修正scrollbar的問題
                viewRender: function (view) {
                    var h;
                    if (view.name == "month") {
                        h = 600;
                    }
                    else {
                        h = 'auto';  // high enough to avoid scrollbars
                    }
                    $('#calendar').fullCalendar('option', 'height', h);
                },

                //直接拖拉日曆去新增訂單
                select: function (start, end, allDay) {
                    $('#StartDate').val(start.format('YYYY年MM月DD日 a hh:mm'));
                    $('#EndDate').val(end.format('YYYY年MM月DD日 a hh:mm'));
                    $('#checkCustomerModal').modal('show');
                    /* var title = prompt('Event Title:');
                     if (title) {
                         $('#calendar').fullCalendar('renderEvent',
                             {
                                 title: title,
                                 start: start,
                                 end: end
                             },
                             true // make the event "stick"
                         );
                     }*/
                    $('#calendar').fullCalendar('unselect');
                },

                //點下訂單之後發生的事情
                eventClick: function (calEvent, jsEvent, view) {
                    /*alert('Id: ' + calEvent.id
                        + "\nTitle: " + calEvent.title
                        + "\nStart Date: " + calEvent.start
                        + "\nEnd Date: " + calEvent.end
                        );     */



                    $.ajax({
                        type: 'POST',
                        url: "@Url.Content("~/Home/GetReservationDetial")",
                        data: 'id=' + calEvent.id,
                        success: function (res) {
                            $detilModal = $('#detailModal');
                            $detilModal.find("#detailApplicant").text(res['Applicant']);
                            $detilModal.find("#detailApplicantID").text(calEvent.id);
                            $detilModal.find("#detailCustomerID").text(res['ApplicantID']);
                            $detilModal.find("#detailCoach").text(res['Coach']);
                            $detilModal.find("#detailHorse").text(res['Horse']);
                            $detilModal.find("#detailHowPaid").text(res['HowPaid']);
                            $detilModal.find("#detailStartDate").text(res['StartDate']);
                            $detilModal.find("#detailEndDate").text(res['EndDate']);

                            $('#detailCancelReason').hide();
                            $('#detailCancelReasonForm').hide();

                            if (res['IsClean'] == true || res['CancelReason'] != 'No Cancel') {
                                $('#detailState').text('完成').css("color", "green");
                                $('#detailFinish').hide();
                                $('#detailCancel').hide();
                            }
                            else {
                                $('#detailFinish').show();
                                $('#detailState').text('進行中').css("color", "blue");
                            }

                            if (res['CancelReason'] == 'No Cancel' && res['IsClean'] == false) {
                                $('#detailCancel').show();
                                $('#detailState').text('進行中').css("color", "blue");
                            }
                            else {
                                //fail.. 
                            }
                            //如果取消訂單的話show一些資訊
                            if (res['CancelReason'] != 'No Cancel') {
                                $('#detailCancel').hide();
                                $('#detailState').text('取消').css("color", "red");
                                $('#detailCancelReason').text(res['CancelReason']).css("color", "red");
                                $('#detailCancelReason').show();
                                $('#detailCancelReasonForm').show();
                            }

                            $detilModal.modal('show');
                        },
                        error: function (xhr) {
                            //顯示錯誤訊息
                            alert("出現問題啦!!" + xhr.responseText);
                        }
                    });
                },

                //拖曳訂單
                eventDrop: function (event, dayDelta, revertFunc) {
                    if (confirm("確定移動行程?")) {
                        var data = { ReservationId: event.id, StartDate: event.start.format(), EndDate: (event.end) ? event.end.format() : null };
                        $.ajax({
                            type: 'POST',
                            url: "@Url.Content("~/Home/UpdateEvent")",
                            data: data,
                            error: function (xhr) {
                                //顯示錯誤訊息
                                alert(xhr.responseText);
                            }
                        });
                    }
                    else {
                        revertFunc();
                    }
                },

                //縮放訂單
                eventResize: function (event, dayDelta, revertFunc) {
                    if (confirm("確定縮放行程?")) {
                        var data = { ReservationId: event.id, StartDate: event.start.format(), EndDate: (event.end) ? event.end.format() : null };
                        $.ajax({
                            type: 'POST',
                            url: "@Url.Content("~/Home/UpdateEvent")",
                            data: data,
                            error: function (xhr) {
                                //顯示錯誤訊息
                                alert(xhr.responseText);
                            }
                        });
                    }
                    else {
                        revertFunc();
                    }
                },

                //提示使用者系統正在刷新日曆上的訂單
                loading: function (bool) {
                    //alert($('#progress').position().top);
                    if (bool && $('#progress').position().top < 0)
                        $('#loadingModal').modal('show');
                    else
                        $('#loadingModal').modal('hide');
                },
                eventRender: function (event, element) {
                    /*if (event.allDay)
                        $(element).find('span:first').prepend("<img src=\"/Content/loginBack.jpg\" width='20px'/>");
                    else*/
                    if (event.className == "完成")
                        $(element).find('.fc-time').prepend("<img src=\"/Content/images/successIcon.png\" width='20px'/><br />");
                    else if (event.className == "進行中")
                        $(element).find('.fc-time').prepend("<img src=\"/Content/images/inProgressIcon.png\" width='20px'/><br />");
                    else if (event.className == "取消")
                        $(element).find('.fc-time').prepend("<img src=\"/Content/images/cancelIcon.png\" width='20px'/><br />");

                }

            });

            $('#detailFinish').click(function () {
                var reservationID = $('#detailApplicantID').text();
                $.ajax({
                    type: 'POST',
                    url: "@Url.Content("~/Home/FinishedReservation")",
                    data: 'id=' + reservationID,
                    error: function (xhr) {
                        //顯示錯誤訊息
                        //alert('喔喔!!發生錯誤了');
                        $detilModal = $('#detailModal');
                        $detilModal.modal('hide');
                        $('#calendar').fullCalendar('refetchEvents');
                    },
                    success: function (res) {

                    }
                });

            });

            $('#detailCancel').click(function () {
                var cancelReason = prompt("請輸入取消原因");
                if (cancelReason != null) {
                    var reservationID = $('#detailApplicantID').text();
                    $.ajax({
                        type: 'POST',
                        url: "@Url.Content("~/Home/CancelReservation")",
                        data: 'id=' + reservationID + '&reason=' + cancelReason,
                        error: function (xhr) {
                            //顯示錯誤訊息
                            alert('喔喔!!發生錯誤了');
                            //$detilModal = $('#detailModal');
                            //$detilModal.modal('hide');
                            //$('#calendar').fullCalendar('refetchEvents');
                        },
                        success: function (res) {
                            alert('ok!!');
                            $detilModal = $('#detailModal');
                            $detilModal.modal('hide');
                            $('#calendar').fullCalendar('refetchEvents');
                        }
                    });
                }

            });

            $('#newReservation').click(function () {
                $coachInfo = $('.coachChooseBtn');
                $horseInfo = $('.horseChooseBtn');
                var test = {
                    ID: 1, ReservationTitle: "Test",
                    Applicant: $('#Applicant').val(),
                    ApplicantID: $('#ApplicantID').val(),
                    Coach: $coachInfo.text(), CoachID: $coachInfo.attr('id'),
                    Horse: $horseInfo.text(), HorseID: $horseInfo.attr('id'),
                    IsPaid: false, IsClean: false,
                    HowPaid: $('input:radio[name=howpay]:checked').val(),
                    StartDate: $('#StartDate').val().replace('上午', 'AM').replace('下午', 'PM'), EndDate: $('#EndDate').val().replace('上午', 'AM').replace('下午', 'PM')
                };
                $.ajax({
                    type: 'POST',
                    url: "@Url.Content("~/Home/CreateNewReservation")",
                    data: test,
                    error: function (xhr) {
                        alert('error!');
                    },
                    success: function (res) {
                        if (res["State"] == "success!") {
                            $('#calendar').fullCalendar('refetchEvents');
                            $('#newReservationModal').modal('hide');
                        }
                        else if (res["State"] == "no_ticket!")
                        {
                            alert('票卷不足!!!');
                        }
                        else {
                            ShowNonValidationLabel(res);
                        }
                    }
                });

            });

            $('#checkCustomerConfirmBtn').click(function () {
                $('#checkCustomerModal').modal('hide');
                $.ajax({
                    type: 'POST',
                    url: "@Url.Content("~/Home/CheckCustomer")",
                    data: "checkCustomerPhone=" + $('#checkCustomerPhone').val() + "&checkCustomerName=" + $('#checkCustomerName').val(),
                    error: function (xhr) {
                        //顯示錯誤訊息
                        alert('喔喔!!發生錯誤了');
                    },
                    success: function (res) {
                        if ('No customer in database!' == res['State']) {
                            alert('查不到消費者! 系統引導到新增消費者頁面');
                            $('#createCustomerModal').modal('show');
                        }
                        else {
                            $('#Applicant').val(res['CustomerName']);
                            $('#ApplicantID').val(res['ID']);
                            $('#RemainTickets').val(res['RemainTickets']);

                            var jsonDate = res['LastPayDate'];
                            var re = /-?\d+/;
                            var m = re.exec(jsonDate);
                            var d = new Date(parseInt(m[0]));

                            $('#LastPayDate').val(d);
                            $('#newReservationModal').modal('show');
                        }
                    }
                });
                //$('#newReservationModal').modal('show');
            });


            $('#createCustomerConfirmBtn').click(function () {
                // alert($('#RemainTickets').val());
                var data = {
                    CustomerName: $('#CustomerName').val(),
                    CellPhone1: $('#CellPhone1').val(),
                    CellPhone2: $('#CellPhone2').val(),
                    EmailAddress: $('#EmailAddress').val(),
                    Address: $('#Address').val(),
                    IntroducedBy: $('#CIntroducedBy').val(),
                    RemainTickets: $('#CRemainTickets').val(),
                    Birthday: $('#CBirthday').val(),
                };
                $.ajax({
                    type: 'POST',
                    url: "@Url.Content("~/Home/CreateCustomer")",
                    data: data,
                    success: function (res) {

                        if ("success!" == res['State']) {
                            alert("success!");
                            $('#createCustomerModal').modal('hide');
                        }
                        else {
                            ShowNonValidationLabel(res);
                        }


                    },
                    error: function (xhr) {
                        //顯示錯誤訊息
                        alert(xhr.responseText);
                    }
                });
            });

            $('.CoachNameButton').click(function () {
                var changeCoach = { Name: $(this).text(), ID: $(this).attr('id') };
                $.post(
                        "@Url.Content("~/Home/ChangeCoach")",
                changeCoach,
                function (res) {
                    $('#calendar').fullCalendar('refetchEvents');
                },
                "json"
            );
                $('#calendar').fullCalendar('removeEvents');
                //   $('#calendar').fullCalendar('refetchEvents');
            });

            //$("#wrapper").toggleClass("toggled");
            $("#menu-toggle").click(function (e) {
                e.preventDefault();
                $("#wrapper").toggleClass("toggled");
            });

            $('.demo').rateCircle();

            $('#testBtn').click(function () {
                var data = { "FinishFetch": 0, "Goods": [{ "SerNo": "01", "StyleCode": "02", "Code": "0010010001", "Name": "TestPD", "Status": "OK", "BrandCode": "A", "BrandName": "Amanda", "ColorCode": "01", "ColorName": "Black", "SizeCode": "01", "SizeName": "M" }, { "SerNo": "02", "StyleCode": "02", "Code": "0010010002", "Name": "TestPD1", "Status": "OK", "BrandCode": "A", "BrandName": "Amanda", "ColorCode": "02", "ColorName": "White", "SizeCode": "02", "SizeName": "L" }] };
                $.ajax({
                    type: 'POST',
                    url: "@Url.Content("~/Home/TestAPI")",
                    data: data,
                    success: function (res) {
                        alert("success!!");
                        //   $('#createCustomerModal').modal('hide');
                    },
                    error: function (xhr) {
                        //顯示錯誤訊息
                        alert(xhr.responseText);
                    }
                });
            });

            $(document).on('click', '#detailCustomerInfo',
            function () {

                var resID = $('#detailCustomerID').text();
                // alert(resID);
                $.ajax({
                    type: 'POST',
                    url: "@Url.Content("~/Home/GetCustomerDetial")",
                    data: 'id=' + resID,
                    success: function (res) {

                        $detilModal = $('#customerInfoModal');
                        // $detilModal.find('#customerInfoCustomerNameID').text(resID);
                        $detilModal.find("#customerInfoCustomerName").text(res['CustomerName']);
                        $detilModal.find("#customerInfoCellPhone1").text(res['CellPhone1']);
                        $detilModal.find("#customerInfoCellPhone2").text(res['CellPhone2']);
                        $detilModal.find("#customerInfoEmailAddress").text(res['EmailAddress']);
                        $detilModal.find("#customerInfoAddress").text(res['Address']);
                        $detilModal.find("#customerInfoBirthday").text(res['Birthday']);
                        $detilModal.find("#customerInfoIntroducedBy").text(res['IntroducedBy']);
                        $detilModal.find("#customerInfoRemainTickets").text(res['RemainTickets']);
                        // $detilModal.find("#LastPayDate").val(res['LastPayDate']);

                    },
                    error: function (xhr) {
                        //顯示錯誤訊息
                        alert("出現問題啦!!" + xhr.responseText);
                    }
                });
                //  $('#modifyReservationModal').modal('show');
            });

            $(document).on('click', '#detailCustomerHistory',
            function () {

                var resID = $('#detailCustomerID').text();
                // alert(resID);
                $.ajax({
                    type: 'POST',
                    url: "@Url.Content("~/Home/GetCustomerHistory")",
                    data: 'id=' + resID,
                    success: function (res) {

                        $detilModal = $('#customerHistoryModal');

                        var customerHistoryModalBody = $detilModal.find('.modal-body');
                        var all = '';
                        customerHistoryModalBody.text('');
                        all += ('<table class="table table-striped"><thead> <tr> <th>訂單ID</th><th>教練</th><th>使用馬匹</th><th>付款方式</th><th>預約時間</th></tr></thead>');
                        all += ('<tbody>');
                        $.each(res, function (key, obj) {
                            var row = '<tr>';
                            // customerHistoryModalBody.append('<tr>');
                            $.each(obj, function (key, value) {
                                //   customerHistoryModalBody.append('<td>'+value+'</td>');
                                // alert(value['Coach']);
                                row += '<td>' + value + '</td>';
                            }
                            );
                            row += '</tr>';
                            //customerHistoryModalBody.append(row);
                            all += row;
                            //if (++count === obj.length)
                            //  customerHistoryModalBody.append('</tr>');
                        });
                        all += '</tbody></table>';
                        customerHistoryModalBody.append(all);



                        // $detilModal.find("#LastPayDate").val(res['LastPayDate']);


                    },
                    error: function (xhr) {
                        //顯示錯誤訊息
                        alert("出現問題啦!!" + xhr.responseText);
                    }
                });

            });

            var num_li = $("li").length
            for (i = 0; i <= num_li; i++) {
                $(".tips li:eq(" + i + ")").click({
                    id: i
                }, function (e) {
                    // alert(123);
                    trips();
                })
            }

            if ($.cookie("trip") == null) {
                $.cookie("trip", "done");
                trips();
            }

            function trips() {
                //教學
                var options = {
                    tripTheme: 'dark', delay: -1, showNavigation: true, animation: 'swing', tripBlockHTML: [
               '<div class="trip-block">',
                    '<a href="#" class="trip-close"></a>',
                    '<div class="trip-header"></div>',
                    '<div class="trip-content"></div>',
                    //"<img src=\"/Content/successIcon.png\" width='20px'/><br />",
                    '<div class="trip-progress-wrapper">',
                      '<a href="#" class="trip-prev"></a>',
                      '<a href="#" class="trip-next"></a>',
                    '</div>',
                  '</div>'],
                    finishLabel: '完成教學',
                    prevLabel: '上一步',
                    nextLabel: '下一步'
                }; // details about options are listed in next chapter
                var trip = new Trip([
                    {
                        sel: $('.fc-center'),
                        content: '歡迎使用本系統',
                        position: "n"
                    },
                  {
                      sel: $('#startReservationBtn'),
                      content: '您可以按此按鈕開始預約',
                      position: "s",
                      onTripEnd: function (tripIndex) {
                          console.log('onTripEnd : ', tripIndex);
                          var options2 = {
                              tripTheme: 'dark', delay: -1, showNavigation: true, animation: 'swing', tripBlockHTML: [
                         '<div class="trip-block">',
                              '<a href="#" class="trip-close"></a>',
                              '<div class="trip-header"></div>',
                              '<div class="trip-content"></div>',
                              "<img src=\"/Content/images/trip_select.gif\" /><br />",
                              '<div class="trip-progress-wrapper">',
                                '<a href="#" class="trip-prev"></a>',
                                '<a href="#" class="trip-next"></a>',
                              '</div>',
                            '</div>'],
                              finishLabel: '完成教學',
                              prevLabel: '上一步',
                              nextLabel: '下一步'
                          }; // details about options are listed in next chapter
                          var trip2 = new Trip([
                              {
                                  sel: $('.ui-widget-header'),
                                  content: '拖曳行事曆來新增訂單',
                                  position: "s",
                                  expose: true
                              }
                          ], options2);

                          trip2.start();
                      }
                  }
                ], options);
                trip.start();

                $('#checkCustomerModal').on('shown.bs.modal', function (e) {
                    var trip2 = new Trip([
                              {
                                  sel: $('#checkCustomerPhone'),
                                  content: '輸入顧客電話或是',
                                  position: "s"
                              },
                              {
                                  sel: $('#checkCustomerName'),
                                  content: '顧客名稱來帶出顧客資訊',
                                  position: "s"
                              }
                    ]);

                    trip2.start();
                });
                //教學
            }
        });//End of ready

    </script>


<div id="wrapper" class="toggled">
    <!-- Sidebar -->
    <div id="sidebar-wrapper">

        <ul class="sidebar-nav">
            <li class="sidebar-brand">
                <a href="#">
                    馬匹資訊
                </a>
            </li>
            @foreach (var modelItem in ViewBag.Horses)
            {
                <li><a href="#" id="@modelItem.ID">@modelItem.HorseName</a></li>
            }
        </ul>
    </div>

    <br />

    <!-- Button trigger modal -->
    <button type="button" class="btn btn-primary btn-lg" data-toggle="modal" data-target="#checkCustomerModal" id="startReservationBtn">
        開始預約
    </button>

    <!-- <div class="demo" data-value="60"></div> -->

    <div class="tips">
        <ul>
            <li>教學</li>        
        </ul>
    </div>


    <div id="coach_list">

        <button class="btn btn-default close_coach_list">功能列</button><br />
        <div class="coach_list_content">
            <label>教練顯示列表 : </label>

            <button id='-999' class="btn btn-default CoachNameButton">ALL</button>
            @foreach (var modelItem in ViewBag.Coachs)
            {
                <button id='@modelItem.ID' class="btn btn-default CoachNameButton" style="background-color:@modelItem.DisplayColor">@modelItem.CoachName</button>
            }
            <br />
            <br />
            <label>馬匹資訊 : </label>
            <button class="btn btn-default" id="menu-toggle">馬匹資訊</button>

        </div>

    </div>

    <br />
    <br />

    <div id='calendar' class="container-calendar"></div>

</div> <!-- end of wrap -->

    <!-- Detail Modal -->
    <div class="modal fade" id="detailModal" tabindex="-1" role="dialog" aria-labelledby="" aria-hidden="true">
        <div class="modal-dialog" role="document">
            <div class="modal-content">
                <div class="modal-header">
                    <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                        <span aria-hidden="true">&times;</span>
                    </button>
                    <h4 class="modal-title" id="newReservationModalLabel">詳細</h4>
                </div>
                <div class="modal-body">
                    <div class="form-group">
                        <label for="usr">訂單狀態 : </label>
                        <label type="text" class="" id="detailState"></label>
                    </div>
                    <div class="form-group" id="detailCancelReasonForm">
                        <label for="usr">取消原因 : </label>
                        <label type="text" class="" id="detailCancelReason"></label>
                    </div>
                    <div class="form-group">
                        <label for="usr">消費者 : </label>
                        <label type="text" class="" id="detailApplicant"></label>
                        <button data-toggle="modal" href="#customerInfoModal" class="btn btn-success" id="detailCustomerInfo">消費者資訊</button>
                        <button data-toggle="modal" href="#customerHistoryModal" class="btn btn-success" id="detailCustomerHistory">消費紀錄</button>
                    </div>
                    <div class="form-group">
                        <label for="usr">消費者ID : </label>
                        <label type="text" class="" id="detailApplicantID"></label>
                        <label type="text" class="" id="detailCustomerID"></label>
                    </div>
                    <div class="form-group">
                        <label for="usr">教練 : </label> 
                        <label type="text" class="" id="detailCoach"></label>
                    </div>

                    <div class="form-group">
                        <label for="usr">馬匹 : </label>
                        <label type="text" class="" id="detailHorse"></label>
                    </div>

                     <div class="form-group">
                        <label for="usr">付款方式 : </label>
                        <label type="text" class="" id="detailHowPaid"></label>
                    </div>

                    <div class="form-group">
                        <label>預約開始時間 : </label>
                        <div class="form-group">
                            <label type="text" class="" id="detailStartDate"></label>
                        </div>
                    </div>
                    <div class="form-group">
                        <label for="usr">預約結束時間 : </label>
                        <div class="form-group">
                            <label type="text" class="" id="detailEndDate"></label>
                        </div>
                    </div>

                    <button id="detailFinish" type="button" class="btn btn-success">完成這筆訂單</button>
                    <button id="detailCancel" type="button" class="btn btn-danger">取消訂單</button>
                </div>
                 <!-- 
                <div class="modal-footer">
                  <button type="button" class="btn btn-secondary" data-dismiss="modal">取消</button>
                                     
                </div>
                      -->
            </div>
        </div>
    </div>

     <!-- CustomerInfo -->
    <div class="modal" id="customerInfoModal" data-backdrop="static">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <button type="button" class="close" data-dismiss="modal" aria-hidden="true">×</button>
                    <h4 class="modal-title">消費者資訊</h4>
                </div><div class="container"></div>
                <div class="modal-body">
                    <div class="form-group">
                        <label for="">消費者名稱 : </label>
                        <label type="text" id="customerInfoCustomerName"></label>                  
                    </div>             
                    <div class="form-group">
                        <label for="">消費者電話1 : </label>
                        <label type="text" id="customerInfoCellPhone1"></label>  
                    </div>
                    <div class="form-group">
                        <label for="">消費者電話2 : </label>
                        <label type="text" id="customerInfoCellPhone2"></label>  
                    </div>
                    <div class="form-group">
                        <label for="">電子郵件 : </label>
                        <label type="text" id="customerInfoEmailAddress"></label>  
                    </div>
                    <div class="form-group">
                        <label for="">住家地址件 : </label>
                        <label type="text" id="customerInfoAddress"></label>  
                    </div>

                    <div class="form-group">
                        <label for="">介紹人 : </label>
                        <label type="text" id="customerInfoIntroducedBy"></label>  
                    </div>

                    <div class="form-group">
                        <label for="">剩餘票卷 : </label>
                        <label type="text" id="customerInfoRemainTickets"></label>  
                    </div>

                    <div class="form-group">
                        <label for="">生日 : </label>
                        <label type="text" id="customerInfoBirthday"></label>  
                    </div>
                </div>
            </div>
        </div>
    </div>

     <!-- CustomerHistory -->
    <div class="modal" id="customerHistoryModal" data-backdrop="static">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <button type="button" class="close" data-dismiss="modal" aria-hidden="true">×</button>
                    <h4 class="modal-title">消費紀錄</h4>
                </div><div class="container"></div>
                <div class="modal-body">
                    
                </div>
            </div>
        </div>
    </div>


    <!-- New Reservation Modal -->
    <div class="modal custom fade" id="newReservationModal" tabindex="-1" role="dialog" aria-labelledby="newReservationModalLabel" aria-hidden="true">
        <div class="modal-dialog" role="document">
            <div class="modal-content">
                <div class="modal-header">
                    <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                        <span aria-hidden="true">&times;</span>
                    </button>
                    <h4 class="modal-title" id="newReservationModalLabel">預約表單</h4>
                </div>
                <div class="modal-body">
                    <div class="form-group">
                        <label for="usr">申請人</label>
                        <input type="text" class="form-control" id="Applicant">
                        <label for="Applicant" id="tipLabel"></label>                       
                    </div>
                    <div class="form-group">                    
                        <input type="hidden" class="form-control" id="ApplicantID">
                        <label for="ApplicantID" id="tipLabel"></label>
                    </div>
                    <div class="form-group">
                        <label for="usr">剩餘票卷</label>
                        <input type="text" class="form-control" id="RemainTickets">
                        <label for="RemainTickets" id="tipLabel"></label>
                    </div>
                    <div class="form-group">
                        <label for="usr">最後消費日</label>
                        <input type="text" class="form-control" id="LastPayDate">
                        <label for="LastPayDate" id="tipLabel"></label>
                    </div>
                    <div class="form-group">
                        <label for="usr">付款方式</label>
                        <label class="radio-inline" id="HowPaid">
                            <input type="radio" name="howpay" value="0">現金
                        </label>
                        <label class="radio-inline">
                            <input type="radio" name="howpay" value="1" checked="">票卷
                        </label>  
                        <label for="HowPaid" id="tipLabel"></label>              
                    </div>
                    <div class="form-group">
                        <label for="usr">教練</label>
                        <div class="dropdown">
                            <button class="btn btn-default dropdown-toggle btn-select2 coachChooseBtn" type="button" data-toggle="dropdown" id="Coach">
                                選教練
                                <span class="caret"></span>
                            </button>
                            <ul class="dropdown-menu">
                                @foreach (var modelItem in ViewBag.Coachs)
                                {
                                    <li><a href="#" id="@modelItem.ID" name="Coachs">@modelItem.CoachName</a></li>
                                }
                            </ul>
                        </div>
                        <label for="CoachID" id="tipLabel"></label>
                    </div>
                    <div class="form-group">
                        <label for="usr">馬匹</label>
                        <div class="dropdown">
                            <button class="btn btn-default dropdown-toggle btn-select2 horseChooseBtn" type="button" data-toggle="dropdown" id="Horse">
                                選馬匹
                                <span class="caret"></span>
                            </button>
                            <ul class="dropdown-menu">
                                @foreach (var modelItem in ViewBag.Horses)
                                {
                                    <li><a href="#" id="@modelItem.ID" name="Horses">@modelItem.HorseName</a></li>
                                }
                            </ul>
                        </div>
                        <label for="HorseID" id="tipLabel"></label>
                    </div>
                    <div class="form-group">
                        <label>預約開始時間</label>
                        <div class="form-group">
                            <div class='input-group date' id='startDateTimepicker'>
                                <input type='text' class="form-control" data-date-format="YYYY年MM月DD日 A hh:mm" id="StartDate" />
                                <span class="input-group-addon">
                                    <span class="glyphicon glyphicon-calendar"></span>
                                </span>
                            </div>
                            <label for="StartDate" id="tipLabel"></label>
                        </div>
                    </div>
                    <div class="form-group">
                        <label for="usr">預約結束時間</label>
                        <div class="form-group">
                            <div class='input-group date' id='endDatetimepicker'>
                                <input type='text' class="form-control" data-date-format="YYYY年MM月DD日 A hh:mm" id="EndDate" />
                                <span class="input-group-addon">
                                    <span class="glyphicon glyphicon-calendar"></span>
                                </span>
                            </div>
                            <label for="EndDate" id="tipLabel"></label>
                        </div>
                    </div>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-dismiss="modal">取消</button>
                    <button id="newReservation" type="button" class="btn btn-primary">送出預約</button>
                </div>
            </div>
        </div>
    </div>

    <!-- Check customer Modal -->
    <div class="modal fade" id="checkCustomerModal" tabindex="-1" role="dialog" aria-labelledby="checkCustomerModalLabel" aria-hidden="true">
        <div class="modal-dialog" role="document">
            <div class="modal-content">
                <div class="modal-header">
                    <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                        <span aria-hidden="true">&times;</span>
                    </button>
                    <h4 class="modal-title" id="checkCustomerModalLabel">請先輸入消費者資訊</h4>
                </div>
                <div class="modal-body">
                    <div class="form-group">
                        <label for="checkCustomerPhone">輸入消費者電話</label>
                        <input type="text" class="form-control" id="checkCustomerPhone">                    
                    </div>

                    <label id="orLebel">或是</label>

                    <div class="form-group">
                        <label for="checkCustomerName">輸入消費者名稱</label>
                        <input type="text" class="form-control" id="checkCustomerName">                   
                    </div>

                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-dismiss="modal">取消</button>
                    <button id="checkCustomerConfirmBtn" type="button" class="btn btn-primary">確認消費者資訊</button>
                </div>
            </div>
        </div>
    </div>

    <!-- Create customer Modal -->
    <div class="modal fade" id="createCustomerModal" tabindex="-1" role="dialog" aria-labelledby="createCustomerModalLabel" aria-hidden="true">
        <div class="modal-dialog" role="document">
            <div class="modal-content">
                <div class="modal-header">
                    <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                        <span aria-hidden="true">&times;</span>
                    </button>
                    <h4 class="modal-title" id="createCustomerModalLabel">輸入消費者資訊</h4>
                </div>
                <div class="modal-body">
                    <div class="form-group">
                        <label for="checkCustomerName">輸入消費者名稱</label>
                        <input type="text" class="form-control" id="CustomerName">
                        <label for="CustomerName" id="usrTip"></label>
                    </div>
                    <div class="form-group">
                        <label for="checkCustomerPhone">輸入消費者電話1</label>
                        <input type="text" class="form-control" id="CellPhone1">
                        <label for="CellPhone1" id="usrTip"></label>
                    </div>
                    <div class="form-group">
                        <label for="checkCustomerPhone">輸入消費者電話2</label>
                        <input type="text" class="form-control" id="CellPhone2">
                        <label for="CellPhone2" id="usrTip"></label>
                    </div>
                    <div class="form-group">
                        <label for="checkCustomerPhone">輸入電子郵件</label>
                        <input type="text" class="form-control" id="EmailAddress">
                        <label for="EmailAddress" id="usrTip"></label>
                    </div>
                    <div class="form-group">
                        <label for="checkCustomerPhone">住家地址件</label>
                        <input type="text" class="form-control" id="Address">
                        <label for="Address" id="usrTip"></label>
                    </div>

                    <div class="form-group">
                        <label for="checkCustomerPhone">介紹人</label>
                        <input type="text" class="form-control" id="CIntroducedBy">
                        <label for="IntroducedBy" id="usrTip"></label>
                    </div>

                    <div class="form-group">
                        <label for="checkCustomerPhone">購買票卷</label>
                        <input type="text" class="form-control" id="CRemainTickets">
                        <label for="RemainTickets" id="usrTip"></label>
                    </div>

                    <div class="form-group">
                        <label for="checkCustomerPhone">生日</label>
                        <div class="form-group">
                            <div class='input-group date' id='birthdayDateTimepicker'>
                                <input type='text' class="form-control" data-date-format="YYYY年MM月DD日 A hh:mm" id="CBirthday" />
                                <span class="input-group-addon">
                                    <span class="glyphicon glyphicon-calendar"></span>
                                </span>
                            </div>
                        </div>
                        <label for="Birthday" id="usrTip"></label>
                    </div>



                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-dismiss="modal">取消</button>
                    <button id="createCustomerConfirmBtn" type="button" class="btn btn-primary">新增消費者</button>
                </div>
            </div>
        </div>
    </div>

    <!-- Modal -->
    <div class="modal fade" id="loadingModal" role="dialog">
        <div class="modal-dialog">
            <!-- Modal content-->
            <div class="modal-content">
                <div class="modal-body">
                    <p>更新行事曆中.....</p>
                </div>
            </div>
        </div>
    </div>


